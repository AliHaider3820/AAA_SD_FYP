"use strict";(self.webpackChunkaaa_sd_fyp=self.webpackChunkaaa_sd_fyp||[]).push([[151],{6151:(e,s,a)=>{a.r(s),a.d(s,{default:()=>n});var r=a(5043),i=a(8729),t=a(579);const n=function(){const[e,s]=(0,r.useState)(1),[a,n]=(0,r.useState)({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",location:""}),[o,l]=(0,r.useState)(""),{register:c}=(0,r.useContext)(i.cy),d=e=>{const{name:s,value:a}=e.target;n((e=>({...e,[s]:a})))};return(0,t.jsx)("div",{className:"login-container",children:(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),console.log("Form submitted with data:",a),a.location.trim())if(a.password===a.confirmPassword)try{console.log("Attempting to register user...");const e=await c({firstName:a.firstName.trim(),lastName:a.lastName.trim(),email:a.email.trim(),password:a.password,confirmPassword:a.confirmPassword,location:a.location.trim()});if(console.log("Registration result:",e),e&&e.success)console.log("Registration successful, resetting form..."),n({firstName:"",lastName:"",email:"",password:"",confirmPassword:"",location:""}),l(""),console.log("Redirecting to home page..."),window.location.href="/";else{const s=(null===e||void 0===e?void 0:e.message)||"Registration failed";console.error("Registration failed:",s),l(s)}}catch(s){console.error("Error during registration:",{error:s,message:s.message,stack:s.stack}),l("An error occurred during registration. Please try again.")}else l("Passwords do not match");else l("Please enter your location")},className:"login-form",children:[(0,t.jsxs)("h2",{children:["Create an Account (",e,"/3)"]}),o&&(0,t.jsx)("div",{className:"error",children:o}),(()=>{switch(e){case 1:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"First Name"}),(0,t.jsx)("input",{type:"text",name:"firstName",value:a.firstName,onChange:d,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Last Name"}),(0,t.jsx)("input",{type:"text",name:"lastName",value:a.lastName,onChange:d,required:!0})]})]});case 2:return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Email"}),(0,t.jsx)("input",{type:"email",name:"email",value:a.email,onChange:d,required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Password"}),(0,t.jsx)("input",{type:"password",name:"password",value:a.password,onChange:d,required:!0,minLength:"6"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Confirm Password"}),(0,t.jsx)("input",{type:"password",name:"confirmPassword",value:a.confirmPassword,onChange:d,required:!0,minLength:"6"})]})]});case 3:return(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Location"}),(0,t.jsx)("input",{type:"text",name:"location",value:a.location,onChange:d,placeholder:"Enter your city or address",required:!0})]});default:return null}})(),(0,t.jsxs)("div",{className:"form-navigation",children:[e>1&&(0,t.jsx)("button",{type:"button",onClick:()=>{l(""),s(e-1)},className:"nav-button",style:{margin:"10px"},children:"Back"}),e<3?(0,t.jsx)("button",{type:"button",onClick:()=>{if(1!==e||a.firstName.trim()&&a.lastName.trim()){if(2===e){if(!a.email||!a.password||!a.confirmPassword)return void l("Please fill in all fields");if(!/\S+@\S+\.\S+/.test(a.email))return void l("Please enter a valid email address");if(a.password.length<6)return void l("Password must be at least 6 characters long");if(a.password!==a.confirmPassword)return void l("Passwords do not match")}l(""),s(e+1)}else l("Please fill in all fields")},className:"nav-button primary",children:"Next"}):(0,t.jsx)("button",{type:"submit",className:"signup-button",children:"Sign Up"})]}),(0,t.jsxs)("p",{className:"login-link",children:["Already have an account? ",(0,t.jsx)("a",{className:"nav-link",href:"/login",children:"Log in"})]})]})})}}}]);
//# sourceMappingURL=151.99cf70f5.chunk.js.map