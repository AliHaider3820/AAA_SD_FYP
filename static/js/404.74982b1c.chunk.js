"use strict";(self.webpackChunkaaa_sd_fyp=self.webpackChunkaaa_sd_fyp||[]).push([[404],{2404:(e,a,r)=>{r.r(a),r.d(a,{default:()=>n});var s=r(5043),o=r(6767),i=r(8729),l=r(184),t=r(579);const n=()=>{(0,o.Zp)();const{user:e,setUser:a}=(0,s.useContext)(i.cy),[r,n]=(0,s.useState)(""),[c,m]=(0,s.useState)(!1),[d,u]=(0,s.useState)({name:"",email:"",location:"",about:""});(0,s.useEffect)((()=>{(()=>{if(e)return console.log("Loading user data from context:",e),u((a=>({...a,name:e.name||e.username||`${e.firstName||""} ${e.lastName||""}`.trim()||"",email:e.email||"",location:e.location||"",about:e.about||""}))),void(e.profilePicture&&n(e.profilePicture));const a=JSON.parse(localStorage.getItem("currentUser")||"{}");console.log("Loading user data from localStorage:",a),a&&a.email&&(u((e=>({...e,name:a.name||a.username||`${a.firstName||""} ${a.lastName||""}`.trim()||"",email:a.email,location:a.location||"",about:a.about||""}))),a.profilePicture&&n(a.profilePicture))})()}),[e]);const f=e=>{const{name:a,value:r}=e.target;u((e=>({...e,[a]:r})))},p=e||JSON.parse(localStorage.getItem("currentUser")||"{}");if(console.log("Current User Data:",p),!p||!p.email)return(0,t.jsx)("div",{className:"profile-container",children:(0,t.jsxs)("div",{className:"profile-error",children:["Please ",(0,t.jsx)("a",{href:"/login",style:{color:"#3498db",textDecoration:"underline"},children:"log in"})," to view your profile."]})});const x=(()=>{if(p.name)return p.name;if(p.username)return p.username;if(p.firstName||p.lastName)return`${p.firstName||""} ${p.lastName||""}`.trim();if(d.name)return d.name;return(p.email?p.email.split("@")[0]:"")||"User"})();return(0,t.jsxs)("div",{className:"profile-container",children:[(0,t.jsxs)("div",{className:"profile-header",children:[(0,t.jsxs)("div",{className:"profile-avatar",children:[r?(0,t.jsx)("img",{src:r,alt:"Profile",className:"avatar-img"}):(0,t.jsx)(l.x$1,{className:"avatar-icon"}),(0,t.jsxs)("label",{className:"camera-icon",children:[(0,t.jsx)(l.p5B,{}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const a=e.target.files[0];if(!a)return;const r=new FileReader;r.onloadend=()=>{try{const e=r.result;n(e)}catch(e){console.error("Error updating profile picture:",e)}},r.onerror=()=>{console.error("Failed to read the image file")},r.readAsDataURL(a)},style:{display:"none"}})]})]}),(0,t.jsxs)("div",{className:"profile-info",children:[c?(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("input",{type:"text",name:"name",value:d.name,onChange:f,className:"form-input",placeholder:"Your Name"})}):(0,t.jsxs)("div",{className:"profile-name",children:[(0,t.jsx)(l.x$1,{className:"info-icon"}),(0,t.jsx)("h1",{children:x})]}),(0,t.jsxs)("p",{className:"profile-email",children:[(0,t.jsx)(l.maD,{className:"info-icon"})," ",d.email||"No email provided"]}),c?(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("input",{type:"text",name:"location",value:d.location,onChange:f,className:"form-input",placeholder:"Your Location"})}):d.location?(0,t.jsxs)("p",{className:"profile-location",children:[(0,t.jsx)(l.vq8,{className:"info-icon"})," ",d.location]}):null]}),(0,t.jsx)("div",{className:"profile-actions",children:c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{className:"save-profile-btn",onClick:()=>{try{const s=e||JSON.parse(localStorage.getItem("currentUser")||"{}");if(!s||!s.id)return void console.error("No user is currently logged in");const o={...s,name:d.name||s.name,email:d.email||s.email,location:d.location||s.location,about:d.about||s.about,profilePicture:r||s.profilePicture};if(a&&a(o),localStorage.setItem("currentUser",JSON.stringify(o)),s.isServiceProvider){const e=JSON.parse(localStorage.getItem("providers")||"[]").map((e=>e.id===s.id?o:e));localStorage.setItem("providers",JSON.stringify(e))}m(!1)}catch(s){console.error("Error updating profile:",s)}},children:[(0,t.jsx)(l.dIn,{})," Save"]}),(0,t.jsxs)("button",{className:"cancel-edit-btn",onClick:()=>m(!1),children:[(0,t.jsx)(l.QCr,{})," Cancel"]})]}):(0,t.jsxs)("button",{className:"edit-profile-btn",onClick:()=>m(!0),children:[(0,t.jsx)(l.uO9,{})," Edit Profile"]})})]}),(0,t.jsxs)("div",{className:"profile-content",children:[(0,t.jsxs)("div",{className:"profile-section",children:[(0,t.jsx)("h2",{children:"About Me"}),c?(0,t.jsx)("div",{className:"form-group",children:(0,t.jsx)("textarea",{name:"about",value:d.about,onChange:f,className:"form-textarea",placeholder:"Tell us about yourself...",rows:"4"})}):(0,t.jsx)("p",{children:d.about||"No information provided"})]}),(0,t.jsxs)("div",{className:"profile-section",children:[(0,t.jsx)("h2",{children:"Contact Information"}),(0,t.jsxs)("div",{className:"contact-info",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Email:"})," ",d.email]}),d.location&&(0,t.jsxs)("p",{className:"profile-location",children:[(0,t.jsx)(l.vq8,{className:"info-icon"})," ",d.location]})]})]})]})]})}}}]);
//# sourceMappingURL=404.74982b1c.chunk.js.map