"use strict";(self.webpackChunkaaa_sd_fyp=self.webpackChunkaaa_sd_fyp||[]).push([[74],{8074:(e,s,i)=>{i.r(s),i.d(s,{default:()=>n});var a=i(5043),r=i(184),t=i(579);const n=()=>{const[e,s]=(0,a.useState)([]),[i,n]=(0,a.useState)(null),[l,d]=(0,a.useState)(""),[c,o]=(0,a.useState)(""),[m,u]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=()=>{try{const e=JSON.parse(localStorage.getItem("inquiries")||"[]");s(e)}catch(e){console.error("Error loading inquiries:",e)}};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[]);const h=e.filter((e=>{var s,i;return e.message.toLowerCase().includes(l.toLowerCase())||(null===(s=e.serviceName)||void 0===s?void 0:s.toLowerCase().includes(l.toLowerCase()))||(null===(i=e.userName)||void 0===i?void 0:i.toLowerCase().includes(l.toLowerCase()))})),p=(a,r)=>{r.stopPropagation();const t=e.filter((e=>e.id!==a));s(t),localStorage.setItem("inquiries",JSON.stringify(t)),i&&i.id===a&&n(null)},x=e=>new Date(e).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(0,t.jsxs)("div",{className:"inbox-container",children:[(0,t.jsxs)("div",{className:"inbox-sidebar",children:[(0,t.jsxs)("div",{className:"inbox-header",children:[(0,t.jsx)("h2",{children:"Inquiries"}),(0,t.jsxs)("div",{className:"search-bar",children:[(0,t.jsx)(r.KSO,{className:"search-icon"}),(0,t.jsx)("input",{type:"text",placeholder:"Search inquiries...",value:l,onChange:e=>d(e.target.value)})]})]}),(0,t.jsx)("div",{className:"inquiry-list",children:0===h.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)(r.g5U,{size:48,className:"empty-icon"}),(0,t.jsx)("p",{children:"No inquiries found"})]}):h.map((a=>(0,t.jsxs)("div",{className:`inquiry-item ${(null===i||void 0===i?void 0:i.id)===a.id?"active":""} ${a.isRead?"":"unread"}`,onClick:()=>(i=>{if(!i.isRead){const a=e.map((e=>e.id===i.id?{...e,isRead:!0}:e));s(a),localStorage.setItem("inquiries",JSON.stringify(a))}n(i),u(!1),o("")})(a),children:[(0,t.jsxs)("div",{className:"inquiry-preview",children:[(0,t.jsxs)("div",{className:"inquiry-header",children:[(0,t.jsx)("h4",{children:a.userName||"Anonymous User"}),(0,t.jsx)("span",{className:"inquiry-date",children:x(a.createdAt).split(",")[0]})]}),(0,t.jsx)("p",{className:"inquiry-service",children:a.serviceName||"Service"}),(0,t.jsx)("p",{className:"inquiry-message",children:a.message.length>80?`${a.message.substring(0,80)}...`:a.message})]}),(0,t.jsxs)("div",{className:"inquiry-actions",children:[(0,t.jsx)("button",{className:"icon-button delete-button",onClick:e=>p(a.id,e),"aria-label":"Delete inquiry",children:(0,t.jsx)(r.qbC,{})}),"replied"===a.status&&(0,t.jsxs)("span",{className:"status-badge replied",children:[(0,t.jsx)(r.CMH,{})," Replied"]})]})]},a.id)))})]}),(0,t.jsx)("div",{className:"inbox-detail",children:i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"inquiry-detail",children:[(0,t.jsxs)("div",{className:"detail-header",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:i.serviceName||"Service Inquiry"}),(0,t.jsxs)("p",{className:"inquiry-meta",children:["From: ",i.userName||"Anonymous User",i.userEmail&&` (${i.userEmail})`]}),(0,t.jsx)("p",{className:"inquiry-date",children:x(i.createdAt)})]}),(0,t.jsxs)("div",{className:"detail-actions",children:[(0,t.jsxs)("button",{className:"btn btn-outline",onClick:()=>{u(!m),o("")},disabled:"replied"===i.status,children:[(0,t.jsx)(r.w1Z,{})," ","replied"===i.status?"Replied":"Reply"]}),(0,t.jsx)("button",{className:"btn btn-text",onClick:()=>p(i.id,{stopPropagation:()=>{}}),children:(0,t.jsx)(r.qbC,{})})]})]}),(0,t.jsxs)("div",{className:"inquiry-content",children:[(0,t.jsx)("h4",{children:"Message:"}),(0,t.jsx)("p",{children:i.message})]}),"replied"===i.status&&i.reply&&(0,t.jsxs)("div",{className:"inquiry-reply",children:[(0,t.jsxs)("div",{className:"reply-header",children:[(0,t.jsx)("h4",{children:"Your Reply"}),(0,t.jsx)("span",{className:"reply-date",children:x(i.reply.timestamp)})]}),(0,t.jsx)("p",{children:i.reply.content})]})]}),m&&(0,t.jsxs)("div",{className:"reply-form",children:[(0,t.jsx)("h4",{children:"Send Reply"}),(0,t.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),placeholder:"Type your reply here...",rows:"4"}),(0,t.jsxs)("div",{className:"form-actions",children:[(0,t.jsxs)("button",{className:"btn btn-outline",onClick:()=>u(!1),children:[(0,t.jsx)(r.QCr,{})," Cancel"]}),(0,t.jsxs)("button",{className:"btn btn-primary",onClick:()=>{if(!c.trim()||!i)return;const a=e.map((e=>e.id===i.id?{...e,status:"replied",reply:{content:c,timestamp:(new Date).toISOString()},isRead:!0}:e));s(a),localStorage.setItem("inquiries",JSON.stringify(a)),n({...i,status:"replied",reply:{content:c,timestamp:(new Date).toISOString()},isRead:!0}),u(!1),o("")},disabled:!c.trim(),children:[(0,t.jsx)(r.w1Z,{})," Send Reply"]})]})]})]}):(0,t.jsxs)("div",{className:"empty-state empty-detail",children:[(0,t.jsx)(r.maD,{size:64,className:"empty-icon"}),(0,t.jsx)("h3",{children:"Select an inquiry to view details"}),(0,t.jsx)("p",{children:"Choose an inquiry from the list to read and respond to messages."})]})})]})}}}]);
//# sourceMappingURL=74.42bcbfeb.chunk.js.map