"use strict";(self.webpackChunkaaa_sd_fyp=self.webpackChunkaaa_sd_fyp||[]).push([[736],{736:(e,s,i)=>{i.r(s),i.d(s,{default:()=>o});var a=i(5043),r=i(6767),n=i(184),l=i(8729),t=i(579);const o=()=>{const{businessId:e}=(0,r.g)(),s=(0,r.Zp)(),{user:i}=(0,a.useContext)(l.cy),[o,c]=(0,a.useState)({businessName:"",categoryName:"",description:"",phone:"",email:"",address:"",city:"",yearsOfExperience:"",profilePicture:null,previewImage:""}),[d,m]=(0,a.useState)(["Plumbing","Electrical","Cleaning","Moving","Painting","Handyman","Landscaping","Pest Control","Other"]),[u,p]=(0,a.useState)(!0),[h,x]=(0,a.useState)(""),[g,f]=(0,a.useState)("");(0,a.useEffect)((()=>{(()=>{try{const s=JSON.parse(localStorage.getItem("serviceProviders")||"[]").find((s=>s.id===e));if(!s)return x("Business not found"),void p(!1);if(s.userId!==(null===i||void 0===i?void 0:i.id))return x("You are not authorized to edit this profile"),void p(!1);c({businessName:s.businessName||"",categoryName:s.categoryName||"",description:s.description||"",phone:s.phone||"",email:s.email||"",address:s.address||"",city:s.city||"",yearsOfExperience:s.yearsOfExperience||"",profilePicture:null,previewImage:s.profilePicture||""}),p(!1)}catch(s){console.error("Error loading business profile:",s),x("Failed to load business profile"),p(!1)}})()}),[e,null===i||void 0===i?void 0:i.id]);const v=e=>{const{name:s,value:i}=e.target;c((e=>({...e,[s]:i})))};return u?(0,t.jsx)("div",{className:"loading-container",children:"Loading..."}):h?(0,t.jsxs)("div",{className:"error-container",children:[(0,t.jsx)("h2",{children:h}),(0,t.jsx)("button",{className:"btn-primary",onClick:()=>s(-1),children:"Go Back"})]}):(0,t.jsxs)("div",{className:"business-profile-edit",children:[(0,t.jsxs)("div",{className:"edit-header",children:[(0,t.jsxs)("button",{className:"back-button",onClick:()=>s(-1),children:[(0,t.jsx)(n.QVr,{})," Back to Profile"]}),(0,t.jsx)("h1",{children:"Edit Business Profile"})]}),(0,t.jsxs)("form",{onSubmit:a=>{a.preventDefault(),x(""),f("");try{if(!o.businessName.trim())return void x("Business name is required");if(!o.categoryName)return void x("Please select a category");const a=JSON.parse(localStorage.getItem("serviceProviders")||"[]").map((s=>s.id===e&&s.userId===(null===i||void 0===i?void 0:i.id)?{...s,businessName:o.businessName,categoryName:o.categoryName,description:o.description,phone:o.phone,email:o.email,address:o.address,city:o.city,yearsOfExperience:o.yearsOfExperience,profilePicture:o.previewImage||s.profilePicture,updatedAt:(new Date).toISOString()}:s));localStorage.setItem("serviceProviders",JSON.stringify(a)),f("Profile updated successfully!"),setTimeout((()=>{s(`/business-profile/${e}`)}),1500)}catch(r){console.error("Error updating business profile:",r),x("Failed to update profile. Please try again.")}},className:"edit-form",children:[(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsx)("h2",{children:"Business Information"}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"businessName",children:"Business Name *"}),(0,t.jsx)("input",{type:"text",id:"businessName",name:"businessName",value:o.businessName,onChange:v,placeholder:"Enter business name",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"categoryName",children:"Category *"}),(0,t.jsxs)("select",{id:"categoryName",name:"categoryName",value:o.categoryName,onChange:v,required:!0,children:[(0,t.jsx)("option",{value:"",children:"Select a category"}),d.map(((e,s)=>(0,t.jsx)("option",{value:e,children:e},s)))]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"yearsOfExperience",children:"Years of Experience"}),(0,t.jsx)("input",{type:"number",id:"yearsOfExperience",name:"yearsOfExperience",min:"0",max:"50",value:o.yearsOfExperience,onChange:v,placeholder:"e.g., 5"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{children:"Business Logo/Image"}),(0,t.jsxs)("div",{className:"image-upload-container",children:[(0,t.jsxs)("div",{className:"image-preview",children:[o.previewImage?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:o.previewImage,alt:"Business preview",className:"preview-image"}),(0,t.jsx)("button",{type:"button",className:"remove-image",onClick:()=>{c((e=>({...e,profilePicture:null,previewImage:""})))},children:(0,t.jsx)(n.QCr,{})})]}):(0,t.jsxs)("div",{className:"upload-placeholder",children:[(0,t.jsx)(n.p5B,{className:"camera-icon"}),(0,t.jsx)("span",{children:"Upload Image"})]}),(0,t.jsx)("input",{type:"file",id:"profilePicture",name:"profilePicture",accept:"image/*",onChange:e=>{const s=e.target.files[0];if(s){const e=new FileReader;e.onloadend=()=>{c((i=>({...i,profilePicture:s,previewImage:e.result})))},e.readAsDataURL(s)}},className:"file-input"})]}),(0,t.jsx)("p",{className:"image-hint",children:"Recommended size: 500x500px, Max size: 2MB"})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"description",children:"Business Description"}),(0,t.jsx)("textarea",{id:"description",name:"description",value:o.description,onChange:v,placeholder:"Tell us about your business...",rows:"4"})]})]}),(0,t.jsxs)("div",{className:"form-section",children:[(0,t.jsx)("h2",{children:"Contact Information"}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"email",children:"Email Address *"}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",value:o.email,onChange:v,placeholder:"your@email.com",required:!0})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,t.jsx)("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:v,placeholder:"+1 (123) 456-7890"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"address",children:"Street Address"}),(0,t.jsx)("input",{type:"text",id:"address",name:"address",value:o.address,onChange:v,placeholder:"123 Business St"})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsx)("label",{htmlFor:"city",children:"City"}),(0,t.jsx)("input",{type:"text",id:"city",name:"city",value:o.city,onChange:v,placeholder:"City"})]})]}),h&&(0,t.jsx)("div",{className:"error-message",children:h}),g&&(0,t.jsx)("div",{className:"success-message",children:g}),(0,t.jsxs)("div",{className:"form-actions",children:[(0,t.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>s(-1),children:"Cancel"}),(0,t.jsxs)("button",{type:"submit",className:"btn-primary",children:[(0,t.jsx)(n.dIn,{})," Save Changes"]})]})]})]})}}}]);
//# sourceMappingURL=736.b37c8eca.chunk.js.map