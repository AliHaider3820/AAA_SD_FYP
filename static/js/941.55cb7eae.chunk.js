"use strict";(self.webpackChunkaaa_sd_fyp=self.webpackChunkaaa_sd_fyp||[]).push([[941],{941:(e,s,i)=>{i.r(s),i.d(s,{default:()=>d});var a=i(5043),r=i(6767),n=i(184),l=i(8729),c=i(579);const d=()=>{var e,s;const{businessId:i}=(0,r.g)(),{user:d}=(0,a.useContext)(l.cy),[t,o]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[x,v]=(0,a.useState)("");if((0,a.useEffect)((()=>{(async()=>{try{const e=JSON.parse(localStorage.getItem("serviceProviders")||"[]");let s=null;if(i)s=e.find((e=>e.id===i));else if(d){s=e.filter((e=>e.userId===d.id))[0]}s?o(s):v("Business not found")}catch(e){console.error("Error fetching business:",e),v("Failed to load business information")}finally{h(!1)}})()}),[i,null===d||void 0===d?void 0:d.id]),m)return(0,c.jsx)("div",{className:"loading-container",children:"Loading..."});if(x)return(0,c.jsxs)("div",{className:"error-container",children:[(0,c.jsx)("h2",{children:x}),(0,c.jsx)(r.N_,{to:"/",className:"back-link",children:"Return to Home"})]});if(!t)return(0,c.jsxs)("div",{className:"no-business",children:[(0,c.jsx)("h2",{children:"No business profile found"}),(0,c.jsx)(r.N_,{to:"/service-provider-signup",className:"btn-primary",children:d?"Add a New Business":"Register Your Business"}),d&&(0,c.jsx)(r.N_,{to:"/",className:"btn-secondary",style:{marginLeft:"10px"},children:"Back to Home"})]});const u=d&&t.userId===d.id;return(0,c.jsxs)("div",{className:"business-profile",children:[(0,c.jsxs)("div",{className:"profile-header",children:[(0,c.jsxs)("div",{className:"business-avatar",children:[t.profilePicture?(0,c.jsx)("img",{src:t.profilePicture,alt:t.businessName||"Business",className:"business-profile-image",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"}}):null,(0,c.jsx)("div",{className:"avatar-placeholder",style:{display:t.profilePicture?"none":"flex"},children:t.businessName?t.businessName.charAt(0).toUpperCase():"B"})]}),(0,c.jsxs)("div",{className:"business-info",children:[(0,c.jsxs)("div",{className:"business-header",children:[(0,c.jsx)("h1",{children:t.businessName||"My Business"}),u&&(0,c.jsxs)(r.N_,{to:`/edit-business/${t.id}`,className:"edit-btn",children:[(0,c.jsx)(n.uO9,{})," Edit Profile"]})]}),(0,c.jsxs)("div",{className:"rating",children:[[...Array(5)].map(((e,s)=>(0,c.jsx)(n.gt3,{className:s<Math.floor(t.rating)?"star filled":"star"},s))),(0,c.jsxs)("span",{className:"rating-text",children:[t.rating.toFixed(1)," (",(null===(e=t.reviews)||void 0===e?void 0:e.length)||0," reviews)"]})]}),(0,c.jsx)("p",{className:"category",children:t.categoryName||"Service Provider"}),t.yearsOfExperience&&(0,c.jsxs)("p",{className:"experience",children:[t.yearsOfExperience," year","1"!==t.yearsOfExperience?"s":""," of experience"]})]})]}),(0,c.jsxs)("div",{className:"business-details",children:[(0,c.jsxs)("div",{className:"detail-card",children:[(0,c.jsx)("h3",{children:"Contact Information"}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)(n.Cab,{className:"detail-icon"}),(0,c.jsx)("span",{children:t.phone||"Not provided"})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)(n.maD,{className:"detail-icon"}),(0,c.jsx)("span",{children:t.email})]}),(0,c.jsxs)("div",{className:"detail-item",children:[(0,c.jsx)(n.vq8,{className:"detail-icon"}),(0,c.jsx)("span",{children:[t.address,t.location,t.city].filter(Boolean).join(", ")})]})]}),(0,c.jsxs)("div",{className:"description-card",children:[(0,c.jsx)("h3",{children:"About Us"}),(0,c.jsx)("p",{children:t.description||"No description provided."})]}),(0,c.jsxs)("div",{className:"reviews-card",children:[(0,c.jsx)("div",{className:"reviews-header",children:(0,c.jsx)("h3",{children:"Customer Reviews"})}),(null===(s=t.reviews)||void 0===s?void 0:s.length)>0?(0,c.jsx)("div",{className:"reviews-list",children:t.reviews.map(((e,s)=>(0,c.jsxs)("div",{className:"review-item",children:[(0,c.jsxs)("div",{className:"review-header",children:[(0,c.jsx)("span",{className:"reviewer",children:e.userName||"Anonymous"}),(0,c.jsx)("div",{className:"review-rating",children:[...Array(5)].map(((s,i)=>(0,c.jsx)(n.gt3,{className:i<e.rating?"star filled":"star"},i)))})]}),(0,c.jsx)("p",{className:"review-text",children:e.comment}),(0,c.jsx)("span",{className:"review-date",children:new Date(e.date).toLocaleDateString()})]},s)))}):(0,c.jsx)("p",{className:"no-reviews",children:"No reviews yet. Be the first to review!"})]})]})]})}}}]);
//# sourceMappingURL=941.55cb7eae.chunk.js.map