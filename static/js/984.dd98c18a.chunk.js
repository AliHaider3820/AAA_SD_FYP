"use strict";(self.webpackChunkaaa_sd_fyp=self.webpackChunkaaa_sd_fyp||[]).push([[984],{5984:(e,s,a)=>{a.r(s),a.d(s,{default:()=>c});var i=a(5043),r=a(6767),n=a(8729),l=a(579);const o=[{id:1,name:"Plumbing"},{id:2,name:"Electrical"},{id:3,name:"Food Catering"},{id:4,name:"Home Painting"},{id:5,name:"Transport Services"},{id:6,name:"Home Cleaning"},{id:7,name:"Gardening & Lawn"},{id:8,name:"Home Repair"},{id:9,name:"Locksmith Services"},{id:10,name:"Moving & Storage"},{id:11,name:"Food Delivery"},{id:12,name:"Pest Control"},{id:13,name:"Personal Training"},{id:14,name:"Other"}],c=()=>{var e;const[s,a]=(0,i.useState)(1),[c,t]=(0,i.useState)({name:"",email:"",phone:"",password:"",confirmPassword:"",location:"",businessName:"",serviceCategory:"",yearsOfExperience:"",description:"",address:"",city:"",profilePicture:null,imagePreview:""}),[d,m]=(0,i.useState)(""),[p,u]=(0,i.useState)(!1),h=(0,r.Zp)(),{register:v,registerServiceProvider:x,user:j,setUser:g}=(0,i.useContext)(n.cy),f=e=>{try{const s=e.target.files[0];if(!s)return;if(m(""),!s.type.match("image.*"))return void m("Please select a valid image file (JPEG, PNG, etc.)");if(s.size>5242880)return void m("Image size should be less than 5MB");const a=new FileReader,i=t;a.onload=e=>{try{i((a=>({...a,profilePicture:s,imagePreview:e.target.result})))}catch(a){console.error("Error updating form data:",a),m("Failed to process the image")}},a.onerror=()=>{m("Failed to read the image file")},a.readAsDataURL(s)}catch(s){console.error("Error in handleImageChange:",s),m("An error occurred while processing the image")}},N=e=>{const{name:s,value:a,type:i,files:r}=e.target;"file"!==i?t((e=>({...e,[s]:a}))):f(e)},w=()=>1===s?c.name.trim()?c.email.trim()?/\S+@\S+\.\S+/.test(c.email)?c.phone.trim()?c.password?c.password.length<6?(m("Password must be at least 6 characters long"),!1):c.password===c.confirmPassword||(m("Passwords do not match"),!1):(m("Password is required"),!1):(m("Phone number is required"),!1):(m("Please enter a valid email address"),!1):(m("Email is required"),!1):(m("Full name is required"),!1):2===s?c.businessName.trim()?c.serviceCategory?c.address.trim()?c.city.trim()?!!c.profilePicture||(m("Please upload a profile picture"),!1):(m("City is required"),!1):(m("Business address is required"),!1):(m("Please select a service category"),!1):(m("Business name is required"),!1):(m(""),!0),b=()=>{w()&&(a(s+1),m(""),window.scrollTo({top:0,behavior:"smooth"}))},y=()=>{a(s-1),m(""),window.scrollTo({top:0,behavior:"smooth"})};return(0,l.jsx)("div",{className:"service-provider-signup",children:(0,l.jsxs)("div",{className:"signup-container",children:[(0,l.jsxs)("div",{className:"signup-header",children:[(0,l.jsx)("h1",{children:"Become a Service Provider"}),d&&(0,l.jsxs)("div",{className:"error-message",children:[(0,l.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,l.jsx)("span",{children:d})]}),(0,l.jsx)("div",{className:"progress-steps",children:[1,2,3].map((e=>(0,l.jsxs)("div",{className:`step ${s===e?"active":""} ${s>e?"completed":""}`,children:[(0,l.jsx)("div",{className:"step-number",children:e}),(0,l.jsx)("div",{className:"step-label",children:1===e?"Personal Info":2===e?"Business Info":"Review"})]},e)))})]}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),w()){u(!0),m("");try{const e=JSON.parse(localStorage.getItem("users")||"[]");if(!e.find((e=>e.email.toLowerCase()===c.email.toLowerCase()))){const e={name:c.name,email:c.email,password:c.password,phone:c.phone,location:c.location,isServiceProvider:!0,role:"service_provider"},s=await v(e);if(!s.success)throw new Error(s.message||"Failed to register user")}const s=JSON.parse(localStorage.getItem("currentUser"));if(!s)throw new Error("Failed to complete registration. Please try again.");const a=s.id,i=o.find((e=>e.id===parseInt(c.serviceCategory))),r={businessName:c.businessName.trim(),email:c.email.toLowerCase().trim(),phone:c.phone.trim(),location:c.location||c.city,address:c.address.trim(),city:c.city.trim(),description:c.description||`Offering ${(null===i||void 0===i?void 0:i.name)||"services"}`,serviceCategory:c.serviceCategory,categoryName:(null===i||void 0===i?void 0:i.name)||"Other",yearsOfExperience:c.yearsOfExperience||"0",userId:a,profilePicture:c.imagePreview||null,name:c.businessName.trim(),createdAt:(new Date).toISOString()};console.log("Submitting provider data:",r);const n=await x(r,a);if(!n.success)throw new Error(n.message||"Failed to register service provider");alert("Registration successful! Your business profile is now active."),h("/business-dashboard")}catch(s){console.error("Registration error:",{error:s,message:s.message,stack:s.stack}),m(s.message||"Failed to register. Please check your information and try again.")}finally{u(!1)}}},className:"signup-form",children:[1===s&&(0,l.jsxs)("div",{className:"form-step",children:[(0,l.jsx)("h2",{children:"Personal Information"}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Full Name *"}),(0,l.jsx)("input",{type:"text",name:"name",value:c.name,onChange:N,placeholder:"Enter your full name",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Email *"}),(0,l.jsx)("input",{type:"email",name:"email",value:c.email,onChange:N,placeholder:"Enter your email",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Phone Number *"}),(0,l.jsx)("input",{type:"tel",name:"phone",value:c.phone,onChange:N,placeholder:"Enter your phone number",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Location"}),(0,l.jsx)("input",{type:"text",name:"location",value:c.location,onChange:N,placeholder:"Your location (e.g., City, Country)"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Create Password *"}),(0,l.jsx)("input",{type:"password",name:"password",value:c.password,onChange:N,placeholder:"Create a password (min 6 characters)",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Confirm Password *"}),(0,l.jsx)("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:N,placeholder:"Confirm your password",required:!0})]}),(0,l.jsx)("div",{className:"form-actions",children:(0,l.jsx)("button",{type:"button",className:"btn-next",onClick:b,children:"Next: Business Details"})})]}),2===s&&(0,l.jsxs)("div",{className:"form-step",children:[(0,l.jsx)("h2",{children:"Business Information"}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Business Name *"}),(0,l.jsx)("input",{type:"text",name:"businessName",value:c.businessName,onChange:N,placeholder:"Your business name",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Service Category *"}),(0,l.jsxs)("select",{name:"serviceCategory",value:c.serviceCategory,onChange:N,className:"form-control",required:!0,children:[(0,l.jsx)("option",{value:"",children:"Select a category"}),o.map((e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Business Address *"}),(0,l.jsx)("input",{type:"text",name:"address",value:c.address,onChange:N,placeholder:"Street address",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"City *"}),(0,l.jsx)("input",{type:"text",name:"city",value:c.city,onChange:N,placeholder:"City",required:!0})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Years of Experience"}),(0,l.jsx)("input",{type:"number",name:"yearsOfExperience",value:c.yearsOfExperience,onChange:N,placeholder:"Years of experience",min:"0",max:"50"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Business Description"}),(0,l.jsx)("textarea",{name:"description",value:c.description,onChange:N,placeholder:"Tell us about your business",rows:"4"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{children:"Profile Picture *"}),(0,l.jsxs)("div",{className:"image-upload",children:[(0,l.jsx)("input",{type:"file",id:"profilePicture",name:"profilePicture",accept:"image/*",onChange:f,className:"file-input",required:!0}),(0,l.jsx)("label",{htmlFor:"profilePicture",className:"file-label",children:c.imagePreview?(0,l.jsx)("img",{src:c.imagePreview,alt:"Preview",className:"image-preview"}):(0,l.jsxs)("div",{className:"upload-placeholder",children:[(0,l.jsx)("i",{className:"fas fa-camera"}),(0,l.jsx)("span",{children:"Upload Profile Picture"})]})})]})]}),(0,l.jsxs)("div",{className:"form-actions",children:[(0,l.jsx)("button",{type:"button",className:"btn-prev",onClick:y,children:"Back"}),(0,l.jsx)("button",{type:"button",className:"btn-next",onClick:b,children:"Next: Review & Submit"})]})]}),3===s&&(0,l.jsxs)("div",{className:"form-step",children:[(0,l.jsx)("h2",{children:"Review Your Information"}),(0,l.jsxs)("div",{className:"review-section",children:[(0,l.jsx)("h3",{children:"Personal Information"}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Name:"}),(0,l.jsx)("span",{className:"review-value",children:c.name})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Email:"}),(0,l.jsx)("span",{className:"review-value",children:c.email})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Phone:"}),(0,l.jsx)("span",{className:"review-value",children:c.phone})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Location:"}),(0,l.jsx)("span",{className:"review-value",children:c.location||"Not specified"})]}),(0,l.jsx)("h3",{children:"Business Information"}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Business Name:"}),(0,l.jsx)("span",{className:"review-value",children:c.businessName})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Service Category:"}),(0,l.jsx)("span",{className:"review-value",children:(null===(e=o.find((e=>e.id===parseInt(c.serviceCategory))))||void 0===e?void 0:e.name)||"Not specified"})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Address:"}),(0,l.jsxs)("span",{className:"review-value",children:[c.address,", ",c.city]})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Years of Experience:"}),(0,l.jsx)("span",{className:"review-value",children:c.yearsOfExperience||"0"})]}),(0,l.jsxs)("div",{className:"review-item",children:[(0,l.jsx)("span",{className:"review-label",children:"Description:"}),(0,l.jsx)("span",{className:"review-value",children:c.description||"No description provided"})]})]}),(0,l.jsxs)("div",{className:"form-actions",children:[(0,l.jsx)("button",{type:"button",className:"btn-prev",onClick:y,children:"Back"}),(0,l.jsx)("button",{type:"submit",className:"btn-submit",disabled:p,children:p?"Submitting...":"Submit Application"})]})]})]})]})})}}}]);
//# sourceMappingURL=984.dd98c18a.chunk.js.map